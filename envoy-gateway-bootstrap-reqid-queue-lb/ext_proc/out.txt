2024/09/06 02:51:14 Starting gRPC server on port :9002
fetchMetricsPeriodically requestMetrics: [{Date:2024-09-06T02:51:14Z PodName:vllm-85997b47fc-n288m PendingRequests:0 RunningRequests:0 WaitingRequests:0 NumberOfActiveAdapters:5 BaseModel:meta-llama/Llama-2-7b-hf GPUKVCacheUsagePerc:0 PseudoGPUKVCacheUsagePerc:0} {Date:2024-09-06T02:51:14Z PodName:vllm-85997b47fc-wc24f PendingRequests:0 RunningRequests:0 WaitingRequests:0 NumberOfActiveAdapters:5 BaseModel:meta-llama/Llama-2-7b-hf GPUKVCacheUsagePerc:0 PseudoGPUKVCacheUsagePerc:0} {Date:2024-09-06T02:51:14Z PodName:vllm-85997b47fc-wssc5 PendingRequests:0 RunningRequests:0 WaitingRequests:0 NumberOfActiveAdapters:5 BaseModel:meta-llama/Llama-2-7b-hf GPUKVCacheUsagePerc:0 PseudoGPUKVCacheUsagePerc:0}]
fetchMetricsPeriodically loraMetrics: [{Date:2024-09-06T02:51:14Z PodName:vllm-85997b47fc-wssc5 ModelName:tweet-summary-0 NumberOfPendingRequests:0} {Date:2024-09-06T02:51:14Z PodName:vllm-85997b47fc-wssc5 ModelName:tweet-summary-2 NumberOfPendingRequests:0} {Date:2024-09-06T02:51:14Z PodName:vllm-85997b47fc-wssc5 ModelName:tweet-summary NumberOfPendingRequests:0} {Date:2024-09-06T02:51:14Z PodName:vllm-85997b47fc-wssc5 ModelName:sql-lora-4 NumberOfPendingRequests:0} {Date:2024-09-06T02:51:14Z PodName:vllm-85997b47fc-wssc5 ModelName:tweet-summary-4 NumberOfPendingRequests:0} {Date:2024-09-06T02:51:14Z PodName:vllm-85997b47fc-n288m ModelName:sql-lora-2 NumberOfPendingRequests:0} {Date:2024-09-06T02:51:14Z PodName:vllm-85997b47fc-n288m ModelName:sql-lora-0 NumberOfPendingRequests:0} {Date:2024-09-06T02:51:14Z PodName:vllm-85997b47fc-n288m ModelName:sql-lora-4 NumberOfPendingRequests:0} {Date:2024-09-06T02:51:14Z PodName:vllm-85997b47fc-n288m ModelName:sql-lora-3 NumberOfPendingRequests:0} {Date:2024-09-06T02:51:14Z PodName:vllm-85997b47fc-n288m ModelName:tweet-summary-1 NumberOfPendingRequests:0} {Date:2024-09-06T02:51:14Z PodName:vllm-85997b47fc-wc24f ModelName:tweet-summary-1 NumberOfPendingRequests:0} {Date:2024-09-06T02:51:14Z PodName:vllm-85997b47fc-wc24f ModelName:sql-lora-2 NumberOfPendingRequests:0} {Date:2024-09-06T02:51:14Z PodName:vllm-85997b47fc-wc24f ModelName:sql-lora-1 NumberOfPendingRequests:0} {Date:2024-09-06T02:51:14Z PodName:vllm-85997b47fc-wc24f ModelName:sql-lora NumberOfPendingRequests:0} {Date:2024-09-06T02:51:14Z PodName:vllm-85997b47fc-wc24f ModelName:sql-lora-4 NumberOfPendingRequests:0}]
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wssc5:tweet-summary-0, Value: {"Date":"2024-09-06T02:51:14Z","PodName":"vllm-85997b47fc-wssc5","ModelName":"tweet-summary-0","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wssc5:tweet-summary-2, Value: {"Date":"2024-09-06T02:51:14Z","PodName":"vllm-85997b47fc-wssc5","ModelName":"tweet-summary-2","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wssc5:tweet-summary, Value: {"Date":"2024-09-06T02:51:14Z","PodName":"vllm-85997b47fc-wssc5","ModelName":"tweet-summary","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wssc5:sql-lora-4, Value: {"Date":"2024-09-06T02:51:14Z","PodName":"vllm-85997b47fc-wssc5","ModelName":"sql-lora-4","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wssc5:tweet-summary-4, Value: {"Date":"2024-09-06T02:51:14Z","PodName":"vllm-85997b47fc-wssc5","ModelName":"tweet-summary-4","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-n288m:sql-lora-2, Value: {"Date":"2024-09-06T02:51:14Z","PodName":"vllm-85997b47fc-n288m","ModelName":"sql-lora-2","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-n288m:sql-lora-0, Value: {"Date":"2024-09-06T02:51:14Z","PodName":"vllm-85997b47fc-n288m","ModelName":"sql-lora-0","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-n288m:sql-lora-4, Value: {"Date":"2024-09-06T02:51:14Z","PodName":"vllm-85997b47fc-n288m","ModelName":"sql-lora-4","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-n288m:sql-lora-3, Value: {"Date":"2024-09-06T02:51:14Z","PodName":"vllm-85997b47fc-n288m","ModelName":"sql-lora-3","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-n288m:tweet-summary-1, Value: {"Date":"2024-09-06T02:51:14Z","PodName":"vllm-85997b47fc-n288m","ModelName":"tweet-summary-1","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wc24f:tweet-summary-1, Value: {"Date":"2024-09-06T02:51:14Z","PodName":"vllm-85997b47fc-wc24f","ModelName":"tweet-summary-1","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wc24f:sql-lora-2, Value: {"Date":"2024-09-06T02:51:14Z","PodName":"vllm-85997b47fc-wc24f","ModelName":"sql-lora-2","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wc24f:sql-lora-1, Value: {"Date":"2024-09-06T02:51:14Z","PodName":"vllm-85997b47fc-wc24f","ModelName":"sql-lora-1","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wc24f:sql-lora, Value: {"Date":"2024-09-06T02:51:14Z","PodName":"vllm-85997b47fc-wc24f","ModelName":"sql-lora","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wc24f:sql-lora-4, Value: {"Date":"2024-09-06T02:51:14Z","PodName":"vllm-85997b47fc-wc24f","ModelName":"sql-lora-4","NumberOfPendingRequests":0}
2024/09/06 02:51:27  
2024/09/06 02:51:27  
2024/09/06 02:51:27 Started process:  -->  
2024/09/06 02:51:27  
2024/09/06 02:51:27  
2024/09/06 02:51:27 Got stream:  -->  
2024/09/06 02:51:27 --- In RequestHeaders processing ...
[request_header]Final headers being sent:
x-went-into-req-headers: true
2024/09/06 02:51:27 Headers: &{RequestHeaders:headers:{headers:{key:":authority" raw_value:"34.126.139.141:8081"} headers:{key:":path" raw_value:"/v1/completions"} headers:{key:":method" raw_value:"POST"} headers:{key:":scheme" raw_value:"http"} headers:{key:"user-agent" raw_value:"curl/8.8.0"} headers:{key:"accept" raw_value:"*/*"} headers:{key:"content-type" raw_value:"application/json"} headers:{key:"content-length" raw_value:"248"} headers:{key:"x-forwarded-proto" raw_value:"http"} headers:{key:"x-request-id" raw_value:"8c0f8eb8-5a27-4ce9-beb9-937692a330cb"}}}
2024/09/06 02:51:27  
2024/09/06 02:51:27  
2024/09/06 02:51:27 Got stream:  -->  
2024/09/06 02:51:27 --- In RequestBody processing
Fetched loraMetrics: []
Fetched requestMetrics: [{Date:2024-09-06T02:51:14Z PodName:vllm-85997b47fc-n288m PendingRequests:0 RunningRequests:0 WaitingRequests:0 NumberOfActiveAdapters:5 BaseModel:meta-llama/Llama-2-7b-hf GPUKVCacheUsagePerc:0 PseudoGPUKVCacheUsagePerc:0} {Date:2024-09-06T02:51:14Z PodName:vllm-85997b47fc-wc24f PendingRequests:0 RunningRequests:0 WaitingRequests:0 NumberOfActiveAdapters:5 BaseModel:meta-llama/Llama-2-7b-hf GPUKVCacheUsagePerc:0 PseudoGPUKVCacheUsagePerc:0} {Date:2024-09-06T02:51:14Z PodName:vllm-85997b47fc-wssc5 PendingRequests:0 RunningRequests:0 WaitingRequests:0 NumberOfActiveAdapters:5 BaseModel:meta-llama/Llama-2-7b-hf GPUKVCacheUsagePerc:0 PseudoGPUKVCacheUsagePerc:0}]
[determinePodsWithLora] All pods considered: [vllm-85997b47fc-n288m vllm-85997b47fc-wc24f vllm-85997b47fc-wssc5]
[FindTargetPod] Min KVCache Utilization: 0.000000, Max KVCache Utilization: 0.000000
[FindTargetPod] Candidate pods based on max tokens pending: [vllm-85997b47fc-n288m vllm-85997b47fc-wc24f vllm-85997b47fc-wssc5] with max token pending 0
Selected target pod: vllm-85997b47fc-wc24f
Selected target pod IP: 10.56.1.36:8000
[request_body] Header Key: x-went-into-req-body, Header Value: true
[request_body] Header Key: target-pod, Header Value: 10.56.1.36:8000
[request_body] Header Key: x-request-id, Header Value: 4f55d49b-8b8a-4d62-841d-ebc6dc9e6ac6
2024/09/06 02:51:29  
2024/09/06 02:51:29  
2024/09/06 02:51:29 Got stream:  -->  
2024/09/06 02:51:29 --- In ResponseHeaders processing
Headers: &{ResponseHeaders:headers:{headers:{key:":status" raw_value:"200"} headers:{key:"date" raw_value:"Fri, 06 Sep 2024 02:51:27 GMT"} headers:{key:"server" raw_value:"uvicorn"} headers:{key:"registered_lora_adapters" raw_value:"{\"sql-lora\": 0, \"tweet-summary\": 0, \"sql-lora-0\": 0, \"tweet-summary-0\": 0, \"sql-lora-1\": 0, \"tweet-summary-1\": 0, \"sql-lora-2\": 0, \"tweet-summary-2\": 0, \"sql-lora-3\": 0, \"tweet-summary-3\": 0, \"sql-lora-4\": 0, \"tweet-summary-4\": 0}"} headers:{key:"orca_registered_lora_adapters" raw_value:"T1JDQQEAAAAMAAAACAAAAHNxbC1sb3JhAAAAAA0AAAB0d2VldC1zdW1tYXJ5AAAAAAoAAABzcWwtbG9yYS0wAAAAAA8AAAB0d2VldC1zdW1tYXJ5LTAAAAAACgAAAHNxbC1sb3JhLTEAAAAADwAAAHR3ZWV0LXN1bW1hcnktMQAAAAAKAAAAc3FsLWxvcmEtMgAAAAAPAAAAdHdlZXQtc3VtbWFyeS0yAAAAAAoAAABzcWwtbG9yYS0zAAAAAA8AAAB0d2VldC1zdW1tYXJ5LTMAAAAACgAAAHNxbC1sb3JhLTQAAAAADwAAAHR3ZWV0LXN1bW1hcnktNAAAAAA="} headers:{key:"active_lora_adapters" raw_value:"{\"sql-lora\": 0, \"sql-lora-1\": 0, \"tweet-summary-1\": 0, \"sql-lora-2\": 0, \"sql-lora-4\": 0}"} headers:{key:"orca_active_lora_adapters" raw_value:"T1JDQQEAAAAFAAAACAAAAHNxbC1sb3JhAAAAAAoAAABzcWwtbG9yYS0xAAAAAA8AAAB0d2VldC1zdW1tYXJ5LTEAAAAACgAAAHNxbC1sb3JhLTIAAAAACgAAAHNxbC1sb3JhLTQAAAAA"} headers:{key:"pending_queue_size" raw_value:"0"} headers:{key:"orca_pending_queue_size" raw_value:"T1JDQQEAAAAAAAAA"} headers:{key:"prompt_tokens" raw_value:"32"} headers:{key:"completion_tokens" raw_value:"100"} headers:{key:"model" raw_value:"meta-llama/Llama-2-7b-hf"} headers:{key:"running_queue_size" raw_value:"0"} headers:{key:"waiting_queue_size" raw_value:"0"} headers:{key:"gpu_cache_usage_sys" raw_value:"0.0"} headers:{key:"prefill_latency_in_sec" raw_value:"1.4855828285217285"} headers:{key:"e2e_latency_in_sec" raw_value:"1.527369737625122"} headers:{key:"content-length" raw_value:"1232"} headers:{key:"content-type" raw_value:"application/json"} headers:{key:"x-envoy-upstream-service-time" raw_value:"1530"} headers:{key:"x-request-id" raw_value:"4f55d49b-8b8a-4d62-841d-ebc6dc9e6ac6"}}}
fetched ip for req 4f55d49b-8b8a-4d62-841d-ebc6dc9e6ac6:10.56.1.36:8000
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wc24f:sql-lora-4, Value: {"Date":"2024-09-06T02:51:29Z","PodName":"vllm-85997b47fc-wc24f","ModelName":"sql-lora-4","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wc24f:sql-lora, Value: {"Date":"2024-09-06T02:51:29Z","PodName":"vllm-85997b47fc-wc24f","ModelName":"sql-lora","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wc24f:sql-lora-1, Value: {"Date":"2024-09-06T02:51:29Z","PodName":"vllm-85997b47fc-wc24f","ModelName":"sql-lora-1","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wc24f:tweet-summary-1, Value: {"Date":"2024-09-06T02:51:29Z","PodName":"vllm-85997b47fc-wc24f","ModelName":"tweet-summary-1","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wc24f:sql-lora-2, Value: {"Date":"2024-09-06T02:51:29Z","PodName":"vllm-85997b47fc-wc24f","ModelName":"sql-lora-2","NumberOfPendingRequests":0}
fetched baseModel for pod vllm-85997b47fc-wc24ffetchMetricsPeriodically requestMetrics: [{Date:2024-09-06T02:51:44Z PodName:vllm-85997b47fc-wssc5 PendingRequests:0 RunningRequests:0 WaitingRequests:0 NumberOfActiveAdapters:5 BaseModel:meta-llama/Llama-2-7b-hf GPUKVCacheUsagePerc:0 PseudoGPUKVCacheUsagePerc:0} {Date:2024-09-06T02:51:44Z PodName:vllm-85997b47fc-n288m PendingRequests:0 RunningRequests:0 WaitingRequests:0 NumberOfActiveAdapters:5 BaseModel:meta-llama/Llama-2-7b-hf GPUKVCacheUsagePerc:0 PseudoGPUKVCacheUsagePerc:0} {Date:2024-09-06T02:51:44Z PodName:vllm-85997b47fc-wc24f PendingRequests:0 RunningRequests:0 WaitingRequests:0 NumberOfActiveAdapters:5 BaseModel:meta-llama/Llama-2-7b-hf GPUKVCacheUsagePerc:0 PseudoGPUKVCacheUsagePerc:0}]
fetchMetricsPeriodically loraMetrics: [{Date:2024-09-06T02:51:44Z PodName:vllm-85997b47fc-n288m ModelName:sql-lora-2 NumberOfPendingRequests:0} {Date:2024-09-06T02:51:44Z PodName:vllm-85997b47fc-n288m ModelName:sql-lora-0 NumberOfPendingRequests:0} {Date:2024-09-06T02:51:44Z PodName:vllm-85997b47fc-n288m ModelName:sql-lora-4 NumberOfPendingRequests:0} {Date:2024-09-06T02:51:44Z PodName:vllm-85997b47fc-n288m ModelName:tweet-summary-1 NumberOfPendingRequests:0} {Date:2024-09-06T02:51:44Z PodName:vllm-85997b47fc-n288m ModelName:sql-lora-3 NumberOfPendingRequests:0} {Date:2024-09-06T02:51:44Z PodName:vllm-85997b47fc-wc24f ModelName:sql-lora-2 NumberOfPendingRequests:0} {Date:2024-09-06T02:51:44Z PodName:vllm-85997b47fc-wc24f ModelName:tweet-summary-1 NumberOfPendingRequests:0} {Date:2024-09-06T02:51:44Z PodName:vllm-85997b47fc-wc24f ModelName:sql-lora NumberOfPendingRequests:0} {Date:2024-09-06T02:51:44Z PodName:vllm-85997b47fc-wc24f ModelName:sql-lora-1 NumberOfPendingRequests:0} {Date:2024-09-06T02:51:44Z PodName:vllm-85997b47fc-wc24f ModelName:sql-lora-4 NumberOfPendingRequests:0} {Date:2024-09-06T02:51:44Z PodName:vllm-85997b47fc-wssc5 ModelName:tweet-summary-0 NumberOfPendingRequests:0} {Date:2024-09-06T02:51:44Z PodName:vllm-85997b47fc-wssc5 ModelName:tweet-summary NumberOfPendingRequests:0} {Date:2024-09-06T02:51:44Z PodName:vllm-85997b47fc-wssc5 ModelName:tweet-summary-4 NumberOfPendingRequests:0} {Date:2024-09-06T02:51:44Z PodName:vllm-85997b47fc-wssc5 ModelName:tweet-summary-2 NumberOfPendingRequests:0} {Date:2024-09-06T02:51:44Z PodName:vllm-85997b47fc-wssc5 ModelName:sql-lora-4 NumberOfPendingRequests:0}]
Set cacheActiveLoraModel - Key: vllm-85997b47fc-n288m:sql-lora-2, Value: {"Date":"2024-09-06T02:51:44Z","PodName":"vllm-85997b47fc-n288m","ModelName":"sql-lora-2","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-n288m:sql-lora-0, Value: {"Date":"2024-09-06T02:51:44Z","PodName":"vllm-85997b47fc-n288m","ModelName":"sql-lora-0","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-n288m:sql-lora-4, Value: {"Date":"2024-09-06T02:51:44Z","PodName":"vllm-85997b47fc-n288m","ModelName":"sql-lora-4","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-n288m:tweet-summary-1, Value: {"Date":"2024-09-06T02:51:44Z","PodName":"vllm-85997b47fc-n288m","ModelName":"tweet-summary-1","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-n288m:sql-lora-3, Value: {"Date":"2024-09-06T02:51:44Z","PodName":"vllm-85997b47fc-n288m","ModelName":"sql-lora-3","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wc24f:sql-lora-2, Value: {"Date":"2024-09-06T02:51:44Z","PodName":"vllm-85997b47fc-wc24f","ModelName":"sql-lora-2","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wc24f:tweet-summary-1, Value: {"Date":"2024-09-06T02:51:44Z","PodName":"vllm-85997b47fc-wc24f","ModelName":"tweet-summary-1","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wc24f:sql-lora, Value: {"Date":"2024-09-06T02:51:44Z","PodName":"vllm-85997b47fc-wc24f","ModelName":"sql-lora","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wc24f:sql-lora-1, Value: {"Date":"2024-09-06T02:51:44Z","PodName":"vllm-85997b47fc-wc24f","ModelName":"sql-lora-1","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wc24f:sql-lora-4, Value: {"Date":"2024-09-06T02:51:44Z","PodName":"vllm-85997b47fc-wc24f","ModelName":"sql-lora-4","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wssc5:tweet-summary-0, Value: {"Date":"2024-09-06T02:51:44Z","PodName":"vllm-85997b47fc-wssc5","ModelName":"tweet-summary-0","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wssc5:tweet-summary, Value: {"Date":"2024-09-06T02:51:44Z","PodName":"vllm-85997b47fc-wssc5","ModelName":"tweet-summary","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wssc5:tweet-summary-4, Value: {"Date":"2024-09-06T02:51:44Z","PodName":"vllm-85997b47fc-wssc5","ModelName":"tweet-summary-4","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wssc5:tweet-summary-2, Value: {"Date":"2024-09-06T02:51:44Z","PodName":"vllm-85997b47fc-wssc5","ModelName":"tweet-summary-2","NumberOfPendingRequests":0}
Set cacheActiveLoraModel - Key: vllm-85997b47fc-wssc5:sql-lora-4, Value: {"Date":"2024-09-06T02:51:44Z","PodName":"vllm-85997b47fc-wssc5","ModelName":"sql-lora-4","NumberOfPendingRequests":0}
